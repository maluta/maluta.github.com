---
layout: post
title: td
tags: [oldblog]
---

<small>[Warning: This post is a backup recovery from my previous Wordpress blog. All content was automatically converted accessing a MySQL database using a Python script (<a href="http://maluta.github.io/blog/convert-wordpress-to-jekyll/">details</a>). Mostly are in Portuguese but if you are interesent I can translate to English. If you found any problem dont't hesitate to contact me in comments.]</small>



<p style="text-align: justify;">Estou utilizando o Vim <em>et all</em>, para escrever o texto do meu trabalho de conclusão de curso (conhecido também como trabalho de diploma, td), são basicamente as ferramentas:</p>

<ol>
	<li><a href="http://www.vim.org/" target="_blank">vim</a> - editor</li>
	<li><a href="http://aspell.net/" target="_blank">aspell</a> - correção ortográfica</li>
	<li><a href="http://www.bibtex.org/" target="_blank">bibtex</a> - referencias textuais</li>
	<li><a href="http://www.latex-project.org/" target="_blank">latex</a> - processador de texto</li>
	<li><a href="http://sourceforge.net/apps/mediawiki/abntex/index.php?title=Main_Page" target="_blank">abntex</a> - padrão do documento</li>
</ol>
<p style="text-align: justify;">A norma (!) diz que as palavras estrangeiras devem ser escritas em <em>itálico. </em>Como é um texto técnico, há o uso frequente de palavras <em>in english</em> e o risco de deixar uma para trás é grande. Como a motivação para não escrever é maior, dispersei e acabei fazendo um programa que a partir de uma entrada (CSV) varre o texto e insere o itálico quando for necessário. O protótipo até agora esta assim:</p>
<a href="http://www.coding.com.br/wp-content/uploads/2010/05/italico.png"><img class="aligncenter size-full wp-image-999" src="http://www.coding.com.br/wp-content/uploads/2010/05/italico.png" alt="" width="441" height="322" /></a>
<p style="text-align: justify;">O código ainda não está limpo para torná-lo acessível num repositório on-line. Além disso, acho que há outras maneiras mais eficazes: sed, python, etc. Como não sei quando vou ter tempo para torná-lo útil de verdade, vou colar aqui as duas partes do código que achei interessante.</p>
<p style="text-align: justify;">A alteração no texto é simples: primeiro varremos o texto procurando pelo termo (<em>*palavra</em> é um iteraror da QStringList) e associamos um índice para cada ocorrência (<em>indexOf</em>) adicionando em uma lista (<em>pos</em> é um QList&lt;int&gt;). Antes de fazermos a troca (<em>replace</em>) comparamos com outra lista (<em>blacklist</em>) se essa inserção já não está dentro de um <em>\textit</em>. Se isso não acontecer, pode existir casos do tipo: <em>\textit{\textit{itálico}}</em>.</p>

<pre><strong>while</strong> <span style="color: #4444ff;">(</span><span style="color: #4444ff;">(</span><span style="color: #2040a0;">i</span><span style="color: #4444ff;">=</span><span style="color: #2040a0;">s</span>.<span style="color: #2040a0;">indexOf</span><span style="color: #4444ff;">(</span><span style="color: #4444ff;">*</span><span style="color: #2040a0;">palavra</span>,<span style="color: #2040a0;">i</span><span style="color: #4444ff;">+</span><span style="color: #ff0000;">1</span><span style="color: #4444ff;">)</span><span style="color: #4444ff;">)</span> <span style="color: #4444ff;">!</span><span style="color: #4444ff;">=</span> <span style="color: #4444ff;">-</span><span style="color: #ff0000;">1</span><span style="color: #4444ff;">)</span>
	<span style="color: #2040a0;">pos</span> <span style="color: #4444ff;">&lt;</span><span style="color: #4444ff;">&lt;</span> <span style="color: #2040a0;">i</span><span style="color: #4444ff;">;</span>

<strong>for</strong> <span style="color: #4444ff;">(</span><span style="color: #2040a0;">index</span><span style="color: #4444ff;">=</span><span style="color: #ff0000;">0</span>, <span style="color: #2040a0;">offset</span><span style="color: #4444ff;">=</span><span style="color: #ff0000;">0</span><span style="color: #4444ff;">;</span> <span style="color: #2040a0;">index</span> <span style="color: #4444ff;">&lt;</span> <span style="color: #2040a0;">pos</span>.<span style="color: #2040a0;">length</span><span style="color: #4444ff;">(</span><span style="color: #4444ff;">)</span> <span style="color: #4444ff;">;</span> <span style="color: #2040a0;">index</span><span style="color: #4444ff;">+</span><span style="color: #4444ff;">+</span><span style="color: #4444ff;">)</span>
	<strong>if</strong> <span style="color: #4444ff;">(</span><span style="color: #2040a0;">blacklist</span>.<span style="color: #2040a0;">contains</span><span style="color: #4444ff;">(</span><span style="color: #2040a0;">pos</span>.<span style="color: #2040a0;">at</span><span style="color: #4444ff;">(</span><span style="color: #2040a0;">index</span><span style="color: #4444ff;">)</span><span style="color: #4444ff;">)</span> <span style="color: #4444ff;">=</span><span style="color: #4444ff;">=</span> <span style="color: #ff0000;">false</span><span style="color: #4444ff;">)</span> <span style="color: #4444ff;"><strong>{</strong></span>
		<span style="color: #2040a0;">str</span> <span style="color: #4444ff;">=</span> <span style="color: #008000;">"<span style="color: #77dd77;">\\</span>textit{"</span> <span style="color: #4444ff;">+</span> <span style="color: #4444ff;">*</span><span style="color: #2040a0;">palavra</span> <span style="color: #4444ff;">+</span> <span style="color: #008000;">"}"</span><span style="color: #4444ff;">;</span>
		<span style="color: #2040a0;">s</span>.<span style="color: #2040a0;">replace</span><span style="color: #4444ff;">(</span><span style="color: #2040a0;">pos</span>.<span style="color: #2040a0;">at</span><span style="color: #4444ff;">(</span><span style="color: #2040a0;">index</span><span style="color: #4444ff;">)</span><span style="color: #4444ff;">+</span><span style="color: #2040a0;">offset</span>,<span style="color: #4444ff;">(</span><span style="color: #4444ff;">*</span><span style="color: #2040a0;">palavra</span><span style="color: #4444ff;">)</span>.<span style="color: #2040a0;">length</span><span style="color: #4444ff;">(</span><span style="color: #4444ff;">)</span>,<span style="color: #2040a0;">str</span><span style="color: #4444ff;">)</span><span style="color: #4444ff;">;</span>
		<span style="color: #2040a0;">offset</span> <span style="color: #4444ff;">+</span><span style="color: #4444ff;">=</span> <span style="color: #ff0000;">9</span><span style="color: #4444ff;">;</span>
	<span style="color: #4444ff;"><strong>}</strong></span></pre>
<p style="text-align: justify;">A construção da <em>blacklist</em> pode também ser aproveitada para evitar outros contextos, como notas de rodapé. Apenas trocar o <em>\\texti</em>t pelo<em> \\footnote</em>.</p>

<pre><strong>while</strong> <span style="color: #4444ff;">(</span><span style="color: #4444ff;">(</span><span style="color: #2040a0;">a</span><span style="color: #4444ff;">=</span><span style="color: #2040a0;">s</span>.<span style="color: #2040a0;">indexOf</span><span style="color: #4444ff;">(</span><span style="color: #008000;">"<span style="color: #77dd77;">\\</span>textit{"</span>,<span style="color: #2040a0;">b</span><span style="color: #4444ff;">+</span><span style="color: #ff0000;">1</span><span style="color: #4444ff;">)</span><span style="color: #4444ff;">)</span> <span style="color: #4444ff;">!</span><span style="color: #4444ff;">=</span> <span style="color: #4444ff;">-</span><span style="color: #ff0000;">1</span><span style="color: #4444ff;">)</span> <span style="color: #4444ff;"><strong>{</strong></span>
	<span style="color: #2040a0;">b</span> <span style="color: #4444ff;">=</span> <span style="color: #2040a0;">s</span>.<span style="color: #2040a0;">indexOf</span><span style="color: #4444ff;">(</span><span style="color: #008000;">"}"</span>,<span style="color: #2040a0;">a</span><span style="color: #4444ff;">)</span><span style="color: #4444ff;">;</span>
	<strong>if</strong> <span style="color: #4444ff;">(</span><span style="color: #4444ff;">(</span><span style="color: #2040a0;">c</span><span style="color: #4444ff;">=</span><span style="color: #2040a0;">s</span>.<span style="color: #2040a0;">indexOf</span><span style="color: #4444ff;">(</span><span style="color: #4444ff;">*</span><span style="color: #2040a0;">palavra</span>,<span style="color: #2040a0;">a</span><span style="color: #4444ff;">)</span><span style="color: #4444ff;">)</span> <span style="color: #4444ff;">&lt;</span> <span style="color: #2040a0;">b</span><span style="color: #4444ff;">)</span>
		<span style="color: #2040a0;">blacklist</span> <span style="color: #4444ff;">&lt;</span><span style="color: #4444ff;">&lt;</span> <span style="color: #2040a0;">s</span>.<span style="color: #2040a0;">indexOf</span><span style="color: #4444ff;">(</span><span style="color: #4444ff;">*</span><span style="color: #2040a0;">palavra</span>,<span style="color: #2040a0;">a</span><span style="color: #4444ff;">)</span><span style="color: #4444ff;">;</span>
<span style="color: #4444ff;"><strong>}</strong></span></pre>
Conclusão: esse <em>post</em> nem era para existir, mas quem sabe eu não invento algum programa que escreva o texto sozinho :P

Até mais!