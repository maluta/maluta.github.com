---
layout: post
title: td
tags: [oldblog]
---

<small>[Warning: This post is a backup recovery from my previous Wordpress blog. All content was automatically converted accessing a MySQL database using a Python script (<a href="http://maluta.github.io/blog/convert-wordpress-to-jekyll/">details</a>). Mostly are in Portuguese but if you are interest I can translate to English. If you found any problem dont't hesitate to contact me in comments.]</small>



<p style="text-align: justify;">Estou utilizando o Vim <em>et all</em>, para escrever o texto do meu trabalho de concluso de curso (conhecido tambm como trabalho de diploma, td), so basicamente as ferramentas:</p>

<ol>
	<li><a href="http://www.vim.org/" target="_blank">vim</a> - editor</li>
	<li><a href="http://aspell.net/" target="_blank">aspell</a> - correo ortogrfica</li>
	<li><a href="http://www.bibtex.org/" target="_blank">bibtex</a> - referencias textuais</li>
	<li><a href="http://www.latex-project.org/" target="_blank">latex</a> - processador de texto</li>
	<li><a href="http://sourceforge.net/apps/mediawiki/abntex/index.php?title=Main_Page" target="_blank">abntex</a> - padro do documento</li>
</ol>
<p style="text-align: justify;">A norma (!) diz que as palavras estrangeiras devem ser escritas em <em>itlico. </em>Como  um texto tcnico, h o uso frequente de palavras <em>in english</em> e o risco de deixar uma para trs  grande. Como a motivao para no escrever  maior, dispersei e acabei fazendo um programa que a partir de uma entrada (CSV) varre o texto e insere o itlico quando for necessrio. O prottipo at agora esta assim:</p>
<a href="http://www.coding.com.br/wp-content/uploads/2010/05/italico.png"><img class="aligncenter size-full wp-image-999" src="http://www.coding.com.br/wp-content/uploads/2010/05/italico.png" alt="" width="441" height="322" /></a>
<p style="text-align: justify;">O cdigo ainda no est limpo para torn-lo acessvel num repositrio on-line. Alm disso, acho que h outras maneiras mais eficazes: sed, python, etc. Como no sei quando vou ter tempo para torn-lo til de verdade, vou colar aqui as duas partes do cdigo que achei interessante.</p>
<p style="text-align: justify;">A alterao no texto  simples: primeiro varremos o texto procurando pelo termo (<em>*palavra</em>  um iteraror da QStringList) e associamos um ndice para cada ocorrncia (<em>indexOf</em>) adicionando em uma lista (<em>pos</em>  um QList&lt;int&gt;). Antes de fazermos a troca (<em>replace</em>) comparamos com outra lista (<em>blacklist</em>) se essa insero j no est dentro de um <em>\textit</em>. Se isso no acontecer, pode existir casos do tipo: <em>\textit{\textit{itlico}}</em>.</p>

<pre><strong>while</strong> <span style="color: #4444ff;">(</span><span style="color: #4444ff;">(</span><span style="color: #2040a0;">i</span><span style="color: #4444ff;">=</span><span style="color: #2040a0;">s</span>.<span style="color: #2040a0;">indexOf</span><span style="color: #4444ff;">(</span><span style="color: #4444ff;">*</span><span style="color: #2040a0;">palavra</span>,<span style="color: #2040a0;">i</span><span style="color: #4444ff;">+</span><span style="color: #ff0000;">1</span><span style="color: #4444ff;">)</span><span style="color: #4444ff;">)</span> <span style="color: #4444ff;">!</span><span style="color: #4444ff;">=</span> <span style="color: #4444ff;">-</span><span style="color: #ff0000;">1</span><span style="color: #4444ff;">)</span>
	<span style="color: #2040a0;">pos</span> <span style="color: #4444ff;">&lt;</span><span style="color: #4444ff;">&lt;</span> <span style="color: #2040a0;">i</span><span style="color: #4444ff;">;</span>

<strong>for</strong> <span style="color: #4444ff;">(</span><span style="color: #2040a0;">index</span><span style="color: #4444ff;">=</span><span style="color: #ff0000;">0</span>, <span style="color: #2040a0;">offset</span><span style="color: #4444ff;">=</span><span style="color: #ff0000;">0</span><span style="color: #4444ff;">;</span> <span style="color: #2040a0;">index</span> <span style="color: #4444ff;">&lt;</span> <span style="color: #2040a0;">pos</span>.<span style="color: #2040a0;">length</span><span style="color: #4444ff;">(</span><span style="color: #4444ff;">)</span> <span style="color: #4444ff;">;</span> <span style="color: #2040a0;">index</span><span style="color: #4444ff;">+</span><span style="color: #4444ff;">+</span><span style="color: #4444ff;">)</span>
	<strong>if</strong> <span style="color: #4444ff;">(</span><span style="color: #2040a0;">blacklist</span>.<span style="color: #2040a0;">contains</span><span style="color: #4444ff;">(</span><span style="color: #2040a0;">pos</span>.<span style="color: #2040a0;">at</span><span style="color: #4444ff;">(</span><span style="color: #2040a0;">index</span><span style="color: #4444ff;">)</span><span style="color: #4444ff;">)</span> <span style="color: #4444ff;">=</span><span style="color: #4444ff;">=</span> <span style="color: #ff0000;">false</span><span style="color: #4444ff;">)</span> <span style="color: #4444ff;"><strong>{</strong></span>
		<span style="color: #2040a0;">str</span> <span style="color: #4444ff;">=</span> <span style="color: #008000;">"<span style="color: #77dd77;">\\</span>textit{"</span> <span style="color: #4444ff;">+</span> <span style="color: #4444ff;">*</span><span style="color: #2040a0;">palavra</span> <span style="color: #4444ff;">+</span> <span style="color: #008000;">"}"</span><span style="color: #4444ff;">;</span>
		<span style="color: #2040a0;">s</span>.<span style="color: #2040a0;">replace</span><span style="color: #4444ff;">(</span><span style="color: #2040a0;">pos</span>.<span style="color: #2040a0;">at</span><span style="color: #4444ff;">(</span><span style="color: #2040a0;">index</span><span style="color: #4444ff;">)</span><span style="color: #4444ff;">+</span><span style="color: #2040a0;">offset</span>,<span style="color: #4444ff;">(</span><span style="color: #4444ff;">*</span><span style="color: #2040a0;">palavra</span><span style="color: #4444ff;">)</span>.<span style="color: #2040a0;">length</span><span style="color: #4444ff;">(</span><span style="color: #4444ff;">)</span>,<span style="color: #2040a0;">str</span><span style="color: #4444ff;">)</span><span style="color: #4444ff;">;</span>
		<span style="color: #2040a0;">offset</span> <span style="color: #4444ff;">+</span><span style="color: #4444ff;">=</span> <span style="color: #ff0000;">9</span><span style="color: #4444ff;">;</span>
	<span style="color: #4444ff;"><strong>}</strong></span></pre>
<p style="text-align: justify;">A construo da <em>blacklist</em> pode tambm ser aproveitada para evitar outros contextos, como notas de rodap. Apenas trocar o <em>\\texti</em>t pelo<em> \\footnote</em>.</p>

<pre><strong>while</strong> <span style="color: #4444ff;">(</span><span style="color: #4444ff;">(</span><span style="color: #2040a0;">a</span><span style="color: #4444ff;">=</span><span style="color: #2040a0;">s</span>.<span style="color: #2040a0;">indexOf</span><span style="color: #4444ff;">(</span><span style="color: #008000;">"<span style="color: #77dd77;">\\</span>textit{"</span>,<span style="color: #2040a0;">b</span><span style="color: #4444ff;">+</span><span style="color: #ff0000;">1</span><span style="color: #4444ff;">)</span><span style="color: #4444ff;">)</span> <span style="color: #4444ff;">!</span><span style="color: #4444ff;">=</span> <span style="color: #4444ff;">-</span><span style="color: #ff0000;">1</span><span style="color: #4444ff;">)</span> <span style="color: #4444ff;"><strong>{</strong></span>
	<span style="color: #2040a0;">b</span> <span style="color: #4444ff;">=</span> <span style="color: #2040a0;">s</span>.<span style="color: #2040a0;">indexOf</span><span style="color: #4444ff;">(</span><span style="color: #008000;">"}"</span>,<span style="color: #2040a0;">a</span><span style="color: #4444ff;">)</span><span style="color: #4444ff;">;</span>
	<strong>if</strong> <span style="color: #4444ff;">(</span><span style="color: #4444ff;">(</span><span style="color: #2040a0;">c</span><span style="color: #4444ff;">=</span><span style="color: #2040a0;">s</span>.<span style="color: #2040a0;">indexOf</span><span style="color: #4444ff;">(</span><span style="color: #4444ff;">*</span><span style="color: #2040a0;">palavra</span>,<span style="color: #2040a0;">a</span><span style="color: #4444ff;">)</span><span style="color: #4444ff;">)</span> <span style="color: #4444ff;">&lt;</span> <span style="color: #2040a0;">b</span><span style="color: #4444ff;">)</span>
		<span style="color: #2040a0;">blacklist</span> <span style="color: #4444ff;">&lt;</span><span style="color: #4444ff;">&lt;</span> <span style="color: #2040a0;">s</span>.<span style="color: #2040a0;">indexOf</span><span style="color: #4444ff;">(</span><span style="color: #4444ff;">*</span><span style="color: #2040a0;">palavra</span>,<span style="color: #2040a0;">a</span><span style="color: #4444ff;">)</span><span style="color: #4444ff;">;</span>
<span style="color: #4444ff;"><strong>}</strong></span></pre>
Concluso: esse <em>post</em> nem era para existir, mas quem sabe eu no invento algum programa que escreva o texto sozinho :P

At mais!